#include <stdio.h>
#include <string.h>
#include <iostream>
using namespace std;
int next[1003];
void calcnxt(char *s, int len) {
    int  j = -1,  i = 0;
    next[0] = -1;
    for (; i < len;) {
        if (j == -1 || s[i] == s[j]) {
            i++;
            j++;
            next[i] = j;
        }
        else j = next[j];
    }
}
int kmp(char *a, char *b) {

    int i = 0, j = 0;
    int la = strlen(a), lb = strlen(b);

    for(;i < la && j < lb;){
        if (j==-1||a[i] == b[j])
            j++,i++;
        else
            j = next[j];
    }
    if(j == lb) return i-lb;
    return -1;
}

int main() {

    char s[] = "AZA";
    char ss[] = "AZAZAZA";

    calcnxt(s,strlen(s));
    for(int i=0;i<=strlen(s);i++)
        cout<<next[i]<<endl;
    printf("%d\n",kmp(ss,s));

    return 0;
}
